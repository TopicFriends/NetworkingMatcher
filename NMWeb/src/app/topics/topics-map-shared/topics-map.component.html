<div class="container">
  <div class="icons-size">
    <span>Icons size:</span>
    <mat-slider
      min="4"
      max="100"
      step="2"
      [(ngModel)]="iconBaseSize"
      (change)="onIconBaseSizeChange()"
    ></mat-slider>

    <ng-template [ngIf]="topics.length > 1">
      <span>Separation:</span>
      <mat-slider
        min="0"
        max="10"
        step="0.5"
        [(ngModel)]="offsetRadius"
        (change)="onOffsetRadiusChange()"
      ></mat-slider>
    </ng-template>

  </div>

  <agm-map #agmap
    [latitude]="coordinates.latitude"
    [longitude]="coordinates.longitude"
    [zoom]="10">
    <ng-template ngFor let-i="index" let-topic [ngForOf]="topics">
      <ng-template ngFor  let-userLocation [ngForOf]="usersGeoLocations[topic.id]">
        <agm-marker
          [markerClickable]="true"
          (mouseOver)="onMouseOver(popupElement, popupProfile, agmap)"
          (mouseOut)="onMouseOut(popupProfile, agmap)"
          [latitude]="userLocation.latitude + offsets[i].lat"
          [longitude]="userLocation.longitude + offsets[i].lon"
          [iconUrl]="topicsIcon[topic.id]"
        >
          <agm-info-window #popupProfile>
            <app-user-profile-popup #popupElement [userId]="userLocation.userId"></app-user-profile-popup>
          </agm-info-window>
        </agm-marker>
      </ng-template>
    </ng-template>
  </agm-map>
</div>

